"use strict";!async function(){const rfm_timeline=await d3.csv("data/rfm_timeline.txt");for(let i of rfm_timeline)i.Anzahl=+i.Anzahl;console.log(rfm_timeline);const sk_cols=[{feature:"2013",show:"FALSE"},{feature:"2014",show:"FALSE"},{feature:"2015",show:"FALSE"},{feature:"2016",show:"TRUE"},{feature:"2017",show:"TRUE"},{feature:"2018",show:"TRUE"}],sk_filter=[],d_cols=Object.keys(rfm_timeline[0]).slice(0,-1).reverse(),d_vals=["Gold","Silber","Bronze","Inaktiv","Neu"];for(let i of d_cols)for(let j of d_vals){let dummy={value:j+" "+i,show:!0,segment:j,year:i};sk_filter.push(dummy)}let mz_parameters={div_id:"mz_sankey",svg_id:"san_svg",data:rfm_timeline,cols:sk_cols,base:"",left:.05,top:.15,bottom:.85,right:.95,orientation:"nohorizontal",legend:"bottom",legend_left:.05,legend_top:.12,cb_parameters:{dd1:"",cb1:""},cb_function:"_create_box_sankey(chartp, chartp.cb_parameters.dd1, chartp.cb_parameters.cb1);",class:"test",text:"TRUE",textsize:15,textcolor:"black",text_dx:-12,text_dy:0,label:"label",value:"value",sort:"TRUE"},cb1_parameters={div_id:"mz_sankey",svg_id:"san_svg",chart_id:"cb1",left:.5,top:.1,right:.65,bottom:.14,box_color:"grey",hover_color:"blue",text_selection_weight:"nobold",selection:"2018",options:sk_cols.map(d=>d.feature),sk_filter:sk_filter,cb_parameters:{sankey:mz_parameters,dd1:""},cb_function:"_create_box_sankey(chartp.cb_parameters.sankey, chartp.cb_parameters.dd1, chartp);"},dd1_parameters={div_id:"mz_sankey",svg_id:"san_svg",chart_id:"dd1",left:.4,top:.1,right:.455,bottom:.14,box_color:"grey",hover_color:"blue",text_selection_weight:"nobold",selection:"2018",options:sk_cols.map(d=>d.feature),cb_parameters:{sankey:mz_parameters,cb1:cb1_parameters},cb_function:"_create_box_sankey(chartp.cb_parameters.sankey, chartp, chartp.cb_parameters.cb1);"};console.log(sk_cols.map(d=>d.feature)),_create_box_sankey(mz_parameters,dd1_parameters,cb1_parameters)}();const _create_box_sankey=function(mz,dd1,cb1){d3.selectAll("#mz_sankey").selectAll("svg").remove(),d3.selectAll("#mz_sankey").selectAll("div").remove(),mz.cb_parameters.dd1=dd1,mz.cb_parameters.cb1=cb1,mz.base=dd1.selection,cb1.cb_parameters.sankey=mz,cb1.cb_parameters.dd1=dd1,dd1.options=mz.cols.filter(a=>"TRUE"==a.show).map(a=>a.feature);let mz_div=d3.select("#mz_sankey").append("svg").attr("id","san_svg");_render_sankey(mz),_render_dropdown_button_div(dd1),_render_dropdown_checkbox_div(cb1)};